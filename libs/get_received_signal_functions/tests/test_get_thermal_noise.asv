classdef test_get_thermal_noise < matlab.unittest.TestCase
    
    properties (ClassSetupParameter)
        class_parameters = struct("simulation_time",300, "T_I", ...
            0.01,"rx_mean_power",1, "C_over_N0_dBHz", 35, "B", 2e7);
    end
    
    methods (TestClassSetup)
        function classSetup(testCase)
            addpath(fullfile(pwd,'..'));
            testCase.addTeardown(@() rmpath(fullfile(pwd,'..')));
        end
    end
    
    methods (Test)
        function testMean(testCase)
            thermal_noise = get_thermal_noise( ...
                testCase.class_parameters.simulation_time, ...
                testCase.class_parameters.T_I, ...
                testCase.class_parameters.rx_mean_power, ...
                testCase.class_parameters.C_over_N0_dBHz, ...
                testCase.class_parameters.B);
            testCase.assertLessThan(abs(mean(thermal_noise)),1e-3,"Th")
        end
    end
end